(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1c1c90c2"],{7515:function(e,l,t){"use strict";t.r(l);var i=function(){var e=this,l=e.$createElement,t=e._self._c||l;return t("div",{staticClass:"form-custom"},[t("div",{staticClass:"form-header"},[t("div"),t("div",{staticClass:"form-header__buttons"},[e.previewing?e._e():t("Button",{attrs:{type:"primary",icon:"md-eye",ghost:""},on:{click:function(l){e.previewing=!0}}},[e._v(" 预览 ")]),e.previewing?e._e():t("Button",{attrs:{type:"primary"},on:{click:e.onSave}},[e._v("保存")]),e.previewing?t("Button",{attrs:{type:"primary",ghost:""},on:{click:e.onBack}},[e._v("返回")]):e._e()],1)]),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.previewing,expression:"!previewing"}],staticClass:"form-container"},[t("div",{staticClass:"form-list"},[t("div",{staticClass:"r-w-sb-c",staticStyle:{"margin-bottom":"16px",display:"flex","justify-content":"space-between"}},[t("span",[e._v("请选择调查表段落")]),t("a",{on:{click:e.onAddForm}},[e._v("添加")])]),e._l(e.forms,(function(l,i){return t("div",{key:i,staticClass:"form-list__item",class:e.formActive===l?"active":"",on:{click:function(t){return e.onClickForm(l)}}},[e._v(" "+e._s(l.title)+" ")])}))],2),t("div",{staticClass:"form-fields"},[t("div",[e._v("请选择段落字段")]),t("Collapse",{attrs:{value:["fixed","custom"],simple:""}},[e.formActive&&e.formActive.fixedFields&&e.formActive.fixedFields.length>0?t("Panel",{attrs:{name:"fixed"}},[e._v(" 固定字段 "),t("template",{slot:"content"},e._l(e.formActive.fixedFields,(function(l,i){return t("Checkbox",{key:i,on:{"on-change":function(t){return e.onChangeFixedField(l)}},model:{value:l.checked,callback:function(t){e.$set(l,"checked",t)},expression:"item.checked"}},[e._v(" "+e._s(l.label)+" ")])})),1)],2):e._e(),t("Panel",{attrs:{name:"custom"}},[e._v(" 自定义字段 "),t("template",{slot:"content"},[t("draggable",{attrs:{list:e.customFields,group:{name:"formEditor",pull:"clone",put:!1},draggable:".custom-field",sort:!1}},e._l(e.customFields,(function(l,i){return t("div",{key:i,staticClass:"custom-field"},[t("Icon",{attrs:{type:l.icon}}),e._v(" "+e._s(l.label)+" ")],1)})),0)],1)],2)],1)],1),t("div",{staticClass:"form-editor"},[t("Input",{attrs:{placeholder:"请输入调查表名"},model:{value:e.formActive.tableName,callback:function(l){e.$set(e.formActive,"tableName",l)},expression:"formActive.tableName"}}),t("Form",{attrs:{"label-width":100,"label-colon":""}},[t("draggable",{staticStyle:{width:"100%",height:"100%","align-content":"flex-start"},attrs:{list:e.formActive.fields,group:"formEditor",tag:"Row","component-data":{props:{}},animation:340}},e._l(e.formActive.fields,(function(l,i){return t("Col",{key:e.$_.uniqueId(l.label),staticClass:"form-item",attrs:{span:l.span||24}},[t("custom-form-item",{attrs:{item:l}}),t("div",{staticClass:"form-item__buttons"},[t("Button",{attrs:{type:"primary",icon:"md-create",size:"small",shape:"circle"},on:{click:function(t){return e.onShowFieldConfig(l,i)}}}),t("Button",{attrs:{type:"error",icon:"md-trash",size:"small",shape:"circle"},on:{click:function(t){return e.onDelField(l,i)}}})],1)],1)})),1)],1)],1)]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.previewing,expression:"previewing"}],staticClass:"form-preview"},[t("Tabs",{attrs:{value:"0"}},e._l(e.forms,(function(l,i){return t("TabPane",{key:i,attrs:{name:i+"",label:l.title}},[t("Form",{attrs:{"label-width":100,"label-colon":""}},[t("Row",e._l(l.fields,(function(l){return t("Col",{key:e.$_.uniqueId(l.label),staticClass:"form-item",attrs:{span:l.span||24}},[t("custom-form-item",{attrs:{item:l}})],1)})),1)],1)],1)})),1)],1),t("Drawer",{attrs:{title:"字段配置",width:"360"},model:{value:e.fieldConfigVisible,callback:function(l){e.fieldConfigVisible=l},expression:"fieldConfigVisible"}},[t("Form",{attrs:{model:e.fieldConfig,"label-width":80}},[t("FormItem",{attrs:{label:"标签名",prop:"label"}},[t("Input",{attrs:{placeholder:"标签名",disabled:e.fieldConfig.isFixed},model:{value:e.fieldConfig.label,callback:function(l){e.$set(e.fieldConfig,"label",l)},expression:"fieldConfig.label"}})],1),t("FormItem",{attrs:{label:"表单栅格",prop:"span"}},[t("InputNumber",{attrs:{min:2,max:24,step:4},model:{value:e.fieldConfig.span,callback:function(l){e.$set(e.fieldConfig,"span",l)},expression:"fieldConfig.span"}})],1),t("FormItem",{attrs:{label:"必填",prop:"required"}},[t("i-switch",{model:{value:e.fieldConfig.required,callback:function(l){e.$set(e.fieldConfig,"required",l)},expression:"fieldConfig.required"}},[t("span",{attrs:{slot:"open"},slot:"open"},[e._v("是")]),t("span",{attrs:{slot:"close"},slot:"close"},[e._v("否")])])],1),["radio","checkbox"].includes(e.fieldConfig.component)&&!e.fieldConfig.isFixed?[t("Divider",[e._v("选项")]),t("draggable",{attrs:{list:e.fieldConfig.options,draggable:".field-option",handle:".handle"}},[e._l(e.fieldConfig.options,(function(l,i){return t("div",{key:e.$_.uniqueId(l.label),staticClass:"field-option"},[t("Icon",{staticClass:"handle",attrs:{type:"md-menu",size:"20"}}),t("Input",{staticStyle:{width:"160px"},attrs:{placeholder:"选项名"},model:{value:l.label,callback:function(t){e.$set(l,"label",t)},expression:"item.label"}}),t("Input",{staticStyle:{width:"100px"},attrs:{placeholder:"选项值"},model:{value:l.value,callback:function(t){e.$set(l,"value",t)},expression:"item.value"}}),t("Icon",{staticClass:"remove",attrs:{type:"ios-remove-circle-outline",size:"20"},on:{click:function(t){return e.onDelOption(l,i)}}})],1)})),t("div",{staticClass:"field-option-add",attrs:{slot:"footer"},on:{click:e.onAddOption},slot:"footer"},[t("Icon",{attrs:{type:"ios-add-circle-outline",size:"18"}}),e._v(" 添加选项 ")],1)],2)]:e._e()],2),t("div",{staticClass:"drawer-footer"},[t("Button",{staticStyle:{"margin-right":"8px"},on:{click:e.onHideFieldConfig}},[e._v("取消")]),t("Button",{attrs:{type:"primary"},on:{click:e.onSaveFieldConfig}},[e._v("保存")])],1)],1)],1)},a=[],n=t("5530"),o=(t("159b"),t("c740"),t("a434"),function(){var e=this,l=e.$createElement,t=e._self._c||l;return t("FormItem",{attrs:{label:e.item.label,"label-width":e.item.labelWidth||null,required:!!e.item.required}},["radio"===e.item.component?[t("RadioGroup",{model:{value:e.item.value,callback:function(l){e.$set(e.item,"value",l)},expression:"item.value"}},e._l(e.item.options,(function(l,i){return t("Radio",{key:i,attrs:{label:l.value}},[e._v(" "+e._s(l.label)+" ")])})),1)]:"checkbox"===e.item.component?[t("CheckboxGroup",e._l(e.item.options,(function(l,i){return t("Checkbox",{key:i,attrs:{label:l.value}},[e._v(" "+e._s(l.label)+" ")])})),1)]:"date"===e.item.component?[t("DatePicker",{attrs:{type:e.item.type||"date",placeholder:"请选择"}})]:[t("Input",{attrs:{placeholder:"请输入"}})]],2)}),s=[],c={name:"CustomFormItem",props:{item:{type:Object,required:!0}}},r=c,d=t("2877"),u=Object(d["a"])(r,o,s,!1,null,"ce2982f0",null),p=u.exports,f=t("b76a"),m=t.n(f),b={label:null,span:24,component:null,required:!1,options:[]},v={components:{CustomFormItem:p,draggable:m.a},data:function(){return{previewing:!1,dragItem:null,formActive:null,forms:[{title:"一般情况",tableName:"",fields:[],fixedFields:[{label:"国际码",component:"input",span:12},{label:"病例编码",component:"input",span:12},{label:"姓名",checked:!0,component:"input",span:12,required:!0},{label:"性别",checked:!0,component:"radio",span:12,options:[{label:"男",value:"1"},{label:"女",value:"2"}]},{label:"身份证号",checked:!0,component:"input",span:12,required:!0},{label:"年龄（岁）",component:"input",span:12},{label:"联系电话",checked:!0,component:"input",span:12,required:!0},{label:"现住址",checked:!0,component:"area",span:24},{label:"详细地址",checked:!0,component:"input",span:24},{label:"职业",component:"input",span:24},{label:"文化程度",component:"radio",options:[{label:"学龄前儿童",value:"1"},{label:"小学",value:"2"},{label:"初中",value:"3"},{label:"高中或中专",value:"4"},{label:"大学及以上",value:"5"},{label:"文盲",value:"6"},{label:"不详",value:"7"}]},{label:"疾病名称",checked:!0,component:"disease"},{label:"病例分类",checked:!0,component:"radio",value:"1",options:[{label:"疑似病例",value:"1"},{label:"临床诊断病例",value:"2"},{label:"实验室确诊病例",value:"3"},{label:"排除",value:"4",showInput:!0}]}]},{title:"发病及临床情况",tableName:"",fields:[],fixedFields:[{label:"发病日期",checked:!0,component:"date",span:12},{label:"发病地点",checked:!0,span:12},{label:"初诊日期",component:"date",span:12},{label:"初诊单位",span:12},{label:"确诊日期",component:"date",span:12},{label:"确诊单位",span:12},{label:"是否住院",component:"radio",span:12,options:[{label:"是",value:"1"},{label:"否",value:"2"}]},{label:"住院日期",component:"date",span:12},{label:"住院单位",span:12},{label:"是否发热",component:"radio",span:12,options:[{label:"是",value:"1"},{label:"否",value:"2"}]},{label:"发热持续天数",span:12},{label:"最高体温",span:12},{label:"临床症状",component:"radio",value:"1",options:[{label:"咳嗽",value:"1"},{label:"胸闷",value:"2"},{label:"呼吸困难",value:"3"},{label:"食欲减退",value:"4"},{label:"头痛",value:"5"},{label:"恶心",value:"6"},{label:"其他",value:"7",showInput:!0}]}]},{title:"流行病学调查",tableName:"",fields:[],fixedFields:[{label:"发病时在现住址县区居住时间",labelWidth:260,checked:!0,span:24,component:"radio",options:[{label:"＜7天",value:"1"},{label:"7-21天",value:"2"},{label:"22天-3月",value:"3"},{label:"＞3月",value:"4"}]},{label:"是否在集体单位",labelWidth:260,checked:!0,span:24,component:"radio",options:[{label:"是",value:"1"},{label:"否",value:"2"},{label:"不详",value:"3"}]},{label:"集体单位具体名称",labelWidth:260,span:24},{label:"过去是否患过此病",labelWidth:260,span:24,component:"radio",options:[{label:"是",value:"1"},{label:"否",value:"2"}]},{label:"发病前2个月是否有外出（或旅游史）",labelWidth:260,span:24,component:"radio",options:[{label:"是",value:"1"},{label:"否",value:"2"}]},{label:"消毒和处理情况",labelWidth:260,span:24,component:"radio",options:[{label:"随时消毒",value:"1"},{label:"终末消毒",value:"2"}]},{label:"行程信息",labelWidth:260,span:24}]},{title:"采样登记",tableName:"",fields:[],fixedFields:[{label:"采样项目",span:12},{label:"采样地点",span:12},{label:"采样时间",span:12,component:"date"},{label:"送样时间",span:12,component:"date"},{label:"出结果时间",span:12,component:"date"},{label:"结果",span:12}]},{title:"其他情况",tableName:"",fields:[],fixedFields:[]}],customFields:[{label:"单选框",icon:"md-radio-button-off",component:"radio",options:[{label:"选项一",value:"1"},{label:"选项二",value:"2"}]},{label:"多选框",icon:"md-square-outline",component:"checkbox",options:[{label:"选项一",value:"1"},{label:"选项二",value:"2"}]},{label:"输入框",icon:"md-create",component:"input"}],fieldConfigVisible:!1,fieldConfig:Object(n["a"])({},b),fieldIndex:null}},created:function(){var e=this;this.forms.forEach((function(l){l.fields&&0!==l.fields.length||l.fixedFields&&l.fixedFields.forEach((function(t){t.checked&&e.onChangeFixedField(t,l)}))})),this.onClickForm(this.forms[0])},methods:{onSave:function(){},onBack:function(){this.previewing?this.previewing=!this.previewing:this.$router.back()},onAddForm:function(){var e={title:"新增段落",tableName:"",fields:[]};this.forms.push(e),this.onClickForm(e)},onClickForm:function(e){this.formActive=e},onChangeFixedField:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.formActive,t=e.checked;if(t)e.isFixed=!0,this.onAddField(e,l);else if(l){var i=l.fields.findIndex((function(l){return l.label===e.label&&e.isFixed}));this.onDelField(e,i)}},onAddField:function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.formActive;l&&l.fields&&l.fields.push(e)},onDelField:function(e,l){this.formActive&&this.formActive.fields&&this.formActive.fields.splice(l,1),e.isFixed&&(e.checked=!1)},onShowFieldConfig:function(e,l){this.fieldIndex=l;var t=this.$_.cloneDeep(e);t.span=(null===t||void 0===t?void 0:t.span)||24,t.required=(null===t||void 0===t?void 0:t.required)||!1,this.fieldConfig=t,this.fieldConfigVisible=!0},onHideFieldConfig:function(){this.fieldConfigVisible=!1,this.fieldConfig=Object(n["a"])({},b)},onSaveFieldConfig:function(){this.fieldConfigVisible=!1,this.formActive.fields[this.fieldIndex]=this.fieldConfig,this.fieldIndex=null,this.fieldConfig=Object(n["a"])({},b)},onDelOption:function(e,l){this.fieldConfig.options.splice(l,1)},onAddOption:function(){this.fieldConfig.options.push({label:"",value:""})}}},h=v,g=(t("d040"),Object(d["a"])(h,i,a,!1,null,"4d07cb0c",null));l["default"]=g.exports},c740:function(e,l,t){"use strict";var i=t("23e7"),a=t("b727").findIndex,n=t("44d2"),o="findIndex",s=!0;o in[]&&Array(1)[o]((function(){s=!1})),i({target:"Array",proto:!0,forced:s},{findIndex:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),n(o)},d040:function(e,l,t){"use strict";t("e8c6")},e8c6:function(e,l,t){}}]);
//# sourceMappingURL=chunk-1c1c90c2.52aa9b29.js.map